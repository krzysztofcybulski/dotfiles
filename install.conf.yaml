- defaults:
   link:
     create: true
     relink: true
- clean: ['~']
- link:
    ~/.config/karabiner: config/karabiner
    ~/.hammerspoon: config/hammerspoon
    ~/Library/Application Support/com.mitchellh.ghostty: config/ghostty
    ~/.gitignore_global: config/git/.gitignore_global
- shell:
    - 
      command: |
        if ! command -v brew >/dev/null 2>&1; then
          echo "Installing Homebrew..."
          /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        else
          echo "Homebrew already installed."
        fi
      quiet: true
      description: "Installing Homebrew..."
    - 
      command: |
        brew bundle --file="Brewfile" --verbose
      stdin: true
      stdout: true
      stderr: true
      description: "Installing apps from Brewfile..."
    - 
      command: |
        /usr/libexec/PlistBuddy -c 'Set :AppleSymbolicHotKeys:64:enabled false' -c 'Set :AppleSymbolicHotKeys:65:enabled false' ~/Library/Preferences/com.apple.symbolichotkeys.plist 2>/dev/null || true; killall cfprefsd Dock SystemUIServer 2>/dev/null || true
      quiet: true
      description: "Disabling Spotlight Cmd+Space..."
    - 
      command: |
        if [ ! -d "$HOME/.nvm" ]; then
        echo "Installing nvm..."
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
        else
          echo "nvm already installed."
        fi
      quiet: true
      description: "Installing nvm..."
    - 
      command: |
        export NVM_DIR="$HOME/.nvm"
        [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
        nvm install node
        nvm use node
      quiet: true
      description: "Installing Node.js..."
    - 
      command: |
        export NVM_DIR="$HOME/.nvm"
        [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
        if ! npm list -g flowise >/dev/null 2>&1; then
          npm install -g flowise
        else
          echo "flowise already installed globally."
        fi
      stderr: true
      description: "Installing flowise..."